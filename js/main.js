!function(c){var n={};function t(l){if(n[l])return n[l].exports;var e=n[l]={i:l,l:!1,exports:{}};return c[l].call(e.exports,e,e.exports,t),e.l=!0,e.exports}t.m=c,t.c=n,t.d=function(c,n,l){t.o(c,n)||Object.defineProperty(c,n,{enumerable:!0,get:l})},t.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},t.t=function(c,n){if(1&n&&(c=t(c)),8&n)return c;if(4&n&&"object"==typeof c&&c&&c.__esModule)return c;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:c}),2&n&&"string"!=typeof c)for(var e in c)t.d(l,e,function(n){return c[n]}.bind(null,e));return l},t.n=function(c){var n=c&&c.__esModule?function(){return c.default}:function(){return c};return t.d(n,"a",n),n},t.o=function(c,n){return Object.prototype.hasOwnProperty.call(c,n)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval('\r\n\r\n// service worker registration - remove if you\'re not going to use it\r\n\r\nif (\'serviceWorker\' in navigator) {\r\n  window.addEventListener(\'load\', function() {\r\n    navigator.serviceWorker.register(\'serviceworker.js\').then(function(registration) {\r\n      // Registration was successful\r\n      console.log(\'ServiceWorker registration successful with scope: \', registration.scope);\r\n    }, function(err) {\r\n      // registration failed :(\r\n      console.log(\'ServiceWorker registration failed: \', err);\r\n    });\r\n  });\r\n}\r\n\r\n// place your code below\r\nconst tableBody = document.querySelector(".table__body--js");\r\nlet todayDate = new Date();\r\nlet lastMonthDate = newDate(todayDate);\r\n\r\n\r\nconst totalIncome = (incomes) => incomes.reduce((acc,income) => acc + income);\r\n\r\n//this function return year-month date(getYearAndMonth)\r\nfunction newDate(todayDate) {\r\n  todayDate.setDate(1);\r\n  todayDate.setMonth(todayDate.getMonth() - 1);\r\n  return new Date(todayDate).toISOString().slice(0,7);\r\n}\r\n\r\nfunction lastMonthIncomeDate(incomes) {\r\n  let lastMonth = incomes.filter(income => {\r\n    const incomeDate = income.date.slice(0,7);\r\n    if (incomeDate === lastMonthDate) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  })\r\n  return lastMonth;\r\n};\r\n\r\nfunction lastMonthIncomes(incomes) {\r\n  let lastMonth = lastMonthIncomeDate(incomes);\r\n  lastMonth = lastMonth.map(el => el.value);\r\n  if (lastMonth.length > 0) {\r\n    lastMonth = lastMonth.reduce((a, b) => {\r\n      return parseFloat(a) + parseFloat(b)\r\n    })\r\n  } \r\n  else {\r\n    lastMonth = 0;\r\n  }\r\n  return lastMonth;\r\n}\r\n\r\n\r\nasync function companny (comp, companiesArray) {\r\n  let companyIncomes = await fetch(`https://recruitment.hal.skygate.io/incomes/${comp.id}`);\r\n  companyIncomes = await companyIncomes.json();\r\n  companyIncomes = companyIncomes.incomes;\r\n  const companyIncome = companyIncomes.map(comp => parseFloat(comp.value));\r\n\r\n  const total = Number(totalIncome(companyIncome)).toFixed(2);\r\n  const average = Number(total/(companyIncome.length + 1)).toFixed(2);\r\n  const monthIncome = Number(lastMonthIncomes(companyIncomes)).toFixed(2);\r\n\r\n  const companyObj = {\r\n    ...comp, \r\n    "totalIncome" : total, \r\n    "averageIncome" : average, \r\n    monthIncome\r\n  };\r\n\r\n  companiesArray.push(companyObj);\r\n}\r\n\r\nasync function getCompaniesList() {\r\n  let company = await fetch("https://recruitment.hal.skygate.io/companies");\r\n  company = await company.json();\r\n  const companiesArray = [];\r\n  \r\n  await Promise.all(company.map(comp => {\r\n    return companny(comp, companiesArray);\r\n  }));\r\n\r\n  \r\n  \r\n  return companiesArray;\r\n  \r\n  \r\n \r\n}\r\n\r\nasync function renderTable() {\r\n  const companiesList = await getCompaniesList();\r\n  let tableInnerHtml = "";\r\n\r\n  for (const company of companiesList) {\r\n    const {id, name, city, totalIncome, averageIncome, monthIncome} = company;\r\n    tableInnerHtml += `\r\n       <tr class="tableRow">\r\n          <td class="tableRow__cell">${id}</td>\r\n          <td class="tableRow__cell">${name}</td>\r\n          <td class="tableRow__cell">${city}</td>\r\n          <td class="tableRow__cell">${totalIncome}</td>\r\n          <td class="tableRow__cell">${averageIncome}</td>\r\n          <td class="tableRow__cell">${monthIncome}</td>\r\n        </tr>\r\n      `;\r\n  }\r\n\r\n  tableBody.innerHTML = tableInnerHtml;\r\n\r\n}\r\n\r\n\r\n\r\n\r\n//TESTING FEW SOLUTION OF PAGINATION\r\n//getCellValue compare innerText and textContent if the table row is empty then it\'s pull data form textContent\r\nconst getCellValue = (tableRow, columnIndex) => (tableRow.children[columnIndex].innerText || tableRow.children[columnIndex].textContent);\r\n\r\nconst comparer = (columnIndex, sortAscending) => (a, b) => {\r\n  const v1 = getCellValue(sortAscending ? a : b, columnIndex);\r\n  const v2 = getCellValue(sortAscending ? b : a, columnIndex);\r\n  if (v1 === "" || v2 === "" || isNaN(v1) || isNaN(v2)) {\r\n    return v1.toString().localeCompare(v2);\r\n  }\r\n  return v1 - v2;\r\n};\r\n\r\nconst checkValue = (text) => (rows) => {\r\n  return Array.from(rows.children).some( (row) => {\r\n    const fieldValue = row.innerText.toLowerCase();\r\n    return (fieldValue.substring(0, text.length) === text);\r\n  });\r\n};\r\n    \r\nconst bodyManager = function getRows() {\r\n  let callbacks;\r\n  const body = document.querySelector("table")\r\n  const render = function renderingTable() {\r\n    const tbody = document.createElement(\'tbody\');\r\n    callbacks.forEach(tr => {\r\n      tbody.appendChild(tr);\r\n    })\r\n\r\n    body.replaceChild(tbody, body.querySelector("tbody"));\r\n  }\r\n\r\n  return function(callback) {\r\n    callbacks = callback;\r\n    render()\r\n  }\r\n}\r\n\r\nrenderTable().then( () => {\r\n\r\n  //Sorting table\r\n\r\n  const headers = Array.from(document.querySelectorAll(".tableHeader__cell"));\r\n  const wholeTable = document.querySelector("table");\r\n  const tableRows = Array.from(wholeTable.querySelector("tbody").rows);\r\n  let check = false;\r\n  let ascOrDsc = false;\r\n  let checkSorting = false;\r\n  \r\n  headers.forEach(th =>\r\n    th.addEventListener("click", e => {\r\n      const tableRows = Array.from(wholeTable.querySelector("tbody").rows);\r\n      ascOrDsc = !ascOrDsc;\r\n      const indexOfTh = Array.from(th.parentNode.children).indexOf(th);\r\n      const sort = bodyManager();\r\n      sort(tableRows\r\n        .sort(comparer(indexOfTh, ascOrDsc))\r\n        );\r\n\r\n      if (!checkSorting) {\r\n        th.classList.remove("headerSortDown");\r\n        th.classList.add("headerSortUp");\r\n        checkSorting = true;\r\n      }\r\n      else {\r\n        th.classList.remove("headerSortUp");\r\n        th.classList.add("headerSortDown");\r\n        checkSorting = false;\r\n      }\r\n    })\r\n  );\r\n\r\n  const buttons = Array.from(document.querySelectorAll(".button"));\r\n  \r\n  buttons.forEach(button => \r\n    button.addEventListener(\'click\', e => {\r\n      const tableRows = Array.from(wholeTable.querySelector("tbody").rows);\r\n      ascOrDsc = !ascOrDsc;\r\n      const indexOfTh = Number(button.value);\r\n      const sort = bodyManager();\r\n      sort(tableRows\r\n        .sort(comparer(indexOfTh, ascOrDsc))\r\n        );\r\n\r\n      if (!checkSorting) {\r\n        button.classList.remove("headerSortDown");\r\n        button.classList.add("headerSortUp");\r\n        checkSorting = true;\r\n      }\r\n      else {\r\n        button.classList.remove("headerSortUp");\r\n        button.classList.add("headerSortDown");\r\n        checkSorting = false;\r\n      }\r\n    }))\r\n\r\n\r\n  //Search in table\r\n  \r\n  const inputQuery = document.querySelector(".input__field--js");\r\n  \r\n  inputQuery.addEventListener("keyup", e => {\r\n    const text = inputQuery.value.toLowerCase();\r\n    const search = bodyManager();\r\n\r\n    search(tableRows.filter(checkValue(text)));\r\n  });\r\n  \r\n})\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsaUZBQWlGLFFBQVE7QUFDekY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7OztBQUlIOzs7O0FBSUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyx3REFBd0Q7QUFDbkU7QUFDQTtBQUNBLHVDQUF1QyxHQUFHO0FBQzFDLHVDQUF1QyxLQUFLO0FBQzVDLHVDQUF1QyxLQUFLO0FBQzVDLHVDQUF1QyxZQUFZO0FBQ25ELHVDQUF1QyxjQUFjO0FBQ3JELHVDQUF1QyxZQUFZO0FBQ25EO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7O0FBR0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSCxDQUFDIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8vIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiAtIHJlbW92ZSBpZiB5b3UncmUgbm90IGdvaW5nIHRvIHVzZSBpdFxyXG5cclxuaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2V3b3JrZXIuanMnKS50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAvLyBSZWdpc3RyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcclxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogJywgcmVnaXN0cmF0aW9uLnNjb3BlKTtcclxuICAgIH0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkIDooXHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICcsIGVycik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gcGxhY2UgeW91ciBjb2RlIGJlbG93XHJcbmNvbnN0IHRhYmxlQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGVfX2JvZHktLWpzXCIpO1xyXG5sZXQgdG9kYXlEYXRlID0gbmV3IERhdGUoKTtcclxubGV0IGxhc3RNb250aERhdGUgPSBuZXdEYXRlKHRvZGF5RGF0ZSk7XHJcblxyXG5cclxuY29uc3QgdG90YWxJbmNvbWUgPSAoaW5jb21lcykgPT4gaW5jb21lcy5yZWR1Y2UoKGFjYyxpbmNvbWUpID0+IGFjYyArIGluY29tZSk7XHJcblxyXG4vL3RoaXMgZnVuY3Rpb24gcmV0dXJuIHllYXItbW9udGggZGF0ZShnZXRZZWFyQW5kTW9udGgpXHJcbmZ1bmN0aW9uIG5ld0RhdGUodG9kYXlEYXRlKSB7XHJcbiAgdG9kYXlEYXRlLnNldERhdGUoMSk7XHJcbiAgdG9kYXlEYXRlLnNldE1vbnRoKHRvZGF5RGF0ZS5nZXRNb250aCgpIC0gMSk7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKHRvZGF5RGF0ZSkudG9JU09TdHJpbmcoKS5zbGljZSgwLDcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsYXN0TW9udGhJbmNvbWVEYXRlKGluY29tZXMpIHtcclxuICBsZXQgbGFzdE1vbnRoID0gaW5jb21lcy5maWx0ZXIoaW5jb21lID0+IHtcclxuICAgIGNvbnN0IGluY29tZURhdGUgPSBpbmNvbWUuZGF0ZS5zbGljZSgwLDcpO1xyXG4gICAgaWYgKGluY29tZURhdGUgPT09IGxhc3RNb250aERhdGUpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0pXHJcbiAgcmV0dXJuIGxhc3RNb250aDtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGxhc3RNb250aEluY29tZXMoaW5jb21lcykge1xyXG4gIGxldCBsYXN0TW9udGggPSBsYXN0TW9udGhJbmNvbWVEYXRlKGluY29tZXMpO1xyXG4gIGxhc3RNb250aCA9IGxhc3RNb250aC5tYXAoZWwgPT4gZWwudmFsdWUpO1xyXG4gIGlmIChsYXN0TW9udGgubGVuZ3RoID4gMCkge1xyXG4gICAgbGFzdE1vbnRoID0gbGFzdE1vbnRoLnJlZHVjZSgoYSwgYikgPT4ge1xyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChhKSArIHBhcnNlRmxvYXQoYilcclxuICAgIH0pXHJcbiAgfSBcclxuICBlbHNlIHtcclxuICAgIGxhc3RNb250aCA9IDA7XHJcbiAgfVxyXG4gIHJldHVybiBsYXN0TW9udGg7XHJcbn1cclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiBjb21wYW5ueSAoY29tcCwgY29tcGFuaWVzQXJyYXkpIHtcclxuICBsZXQgY29tcGFueUluY29tZXMgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9yZWNydWl0bWVudC5oYWwuc2t5Z2F0ZS5pby9pbmNvbWVzLyR7Y29tcC5pZH1gKTtcclxuICBjb21wYW55SW5jb21lcyA9IGF3YWl0IGNvbXBhbnlJbmNvbWVzLmpzb24oKTtcclxuICBjb21wYW55SW5jb21lcyA9IGNvbXBhbnlJbmNvbWVzLmluY29tZXM7XHJcbiAgY29uc3QgY29tcGFueUluY29tZSA9IGNvbXBhbnlJbmNvbWVzLm1hcChjb21wID0+IHBhcnNlRmxvYXQoY29tcC52YWx1ZSkpO1xyXG5cclxuICBjb25zdCB0b3RhbCA9IE51bWJlcih0b3RhbEluY29tZShjb21wYW55SW5jb21lKSkudG9GaXhlZCgyKTtcclxuICBjb25zdCBhdmVyYWdlID0gTnVtYmVyKHRvdGFsLyhjb21wYW55SW5jb21lLmxlbmd0aCArIDEpKS50b0ZpeGVkKDIpO1xyXG4gIGNvbnN0IG1vbnRoSW5jb21lID0gTnVtYmVyKGxhc3RNb250aEluY29tZXMoY29tcGFueUluY29tZXMpKS50b0ZpeGVkKDIpO1xyXG5cclxuICBjb25zdCBjb21wYW55T2JqID0ge1xyXG4gICAgLi4uY29tcCwgXHJcbiAgICBcInRvdGFsSW5jb21lXCIgOiB0b3RhbCwgXHJcbiAgICBcImF2ZXJhZ2VJbmNvbWVcIiA6IGF2ZXJhZ2UsIFxyXG4gICAgbW9udGhJbmNvbWVcclxuICB9O1xyXG5cclxuICBjb21wYW5pZXNBcnJheS5wdXNoKGNvbXBhbnlPYmopO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRDb21wYW5pZXNMaXN0KCkge1xyXG4gIGxldCBjb21wYW55ID0gYXdhaXQgZmV0Y2goXCJodHRwczovL3JlY3J1aXRtZW50LmhhbC5za3lnYXRlLmlvL2NvbXBhbmllc1wiKTtcclxuICBjb21wYW55ID0gYXdhaXQgY29tcGFueS5qc29uKCk7XHJcbiAgY29uc3QgY29tcGFuaWVzQXJyYXkgPSBbXTtcclxuICBcclxuICBhd2FpdCBQcm9taXNlLmFsbChjb21wYW55Lm1hcChjb21wID0+IHtcclxuICAgIHJldHVybiBjb21wYW5ueShjb21wLCBjb21wYW5pZXNBcnJheSk7XHJcbiAgfSkpO1xyXG5cclxuICBcclxuICBcclxuICByZXR1cm4gY29tcGFuaWVzQXJyYXk7XHJcbiAgXHJcbiAgXHJcbiBcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcmVuZGVyVGFibGUoKSB7XHJcbiAgY29uc3QgY29tcGFuaWVzTGlzdCA9IGF3YWl0IGdldENvbXBhbmllc0xpc3QoKTtcclxuICBsZXQgdGFibGVJbm5lckh0bWwgPSBcIlwiO1xyXG5cclxuICBmb3IgKGNvbnN0IGNvbXBhbnkgb2YgY29tcGFuaWVzTGlzdCkge1xyXG4gICAgY29uc3Qge2lkLCBuYW1lLCBjaXR5LCB0b3RhbEluY29tZSwgYXZlcmFnZUluY29tZSwgbW9udGhJbmNvbWV9ID0gY29tcGFueTtcclxuICAgIHRhYmxlSW5uZXJIdG1sICs9IGBcclxuICAgICAgIDx0ciBjbGFzcz1cInRhYmxlUm93XCI+XHJcbiAgICAgICAgICA8dGQgY2xhc3M9XCJ0YWJsZVJvd19fY2VsbFwiPiR7aWR9PC90ZD5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cInRhYmxlUm93X19jZWxsXCI+JHtuYW1lfTwvdGQ+XHJcbiAgICAgICAgICA8dGQgY2xhc3M9XCJ0YWJsZVJvd19fY2VsbFwiPiR7Y2l0eX08L3RkPlxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwidGFibGVSb3dfX2NlbGxcIj4ke3RvdGFsSW5jb21lfTwvdGQ+XHJcbiAgICAgICAgICA8dGQgY2xhc3M9XCJ0YWJsZVJvd19fY2VsbFwiPiR7YXZlcmFnZUluY29tZX08L3RkPlxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwidGFibGVSb3dfX2NlbGxcIj4ke21vbnRoSW5jb21lfTwvdGQ+XHJcbiAgICAgICAgPC90cj5cclxuICAgICAgYDtcclxuICB9XHJcblxyXG4gIHRhYmxlQm9keS5pbm5lckhUTUwgPSB0YWJsZUlubmVySHRtbDtcclxuXHJcbn1cclxuXHJcblxyXG5cclxuXHJcbi8vVEVTVElORyBGRVcgU09MVVRJT04gT0YgUEFHSU5BVElPTlxyXG4vL2dldENlbGxWYWx1ZSBjb21wYXJlIGlubmVyVGV4dCBhbmQgdGV4dENvbnRlbnQgaWYgdGhlIHRhYmxlIHJvdyBpcyBlbXB0eSB0aGVuIGl0J3MgcHVsbCBkYXRhIGZvcm0gdGV4dENvbnRlbnRcclxuY29uc3QgZ2V0Q2VsbFZhbHVlID0gKHRhYmxlUm93LCBjb2x1bW5JbmRleCkgPT4gKHRhYmxlUm93LmNoaWxkcmVuW2NvbHVtbkluZGV4XS5pbm5lclRleHQgfHwgdGFibGVSb3cuY2hpbGRyZW5bY29sdW1uSW5kZXhdLnRleHRDb250ZW50KTtcclxuXHJcbmNvbnN0IGNvbXBhcmVyID0gKGNvbHVtbkluZGV4LCBzb3J0QXNjZW5kaW5nKSA9PiAoYSwgYikgPT4ge1xyXG4gIGNvbnN0IHYxID0gZ2V0Q2VsbFZhbHVlKHNvcnRBc2NlbmRpbmcgPyBhIDogYiwgY29sdW1uSW5kZXgpO1xyXG4gIGNvbnN0IHYyID0gZ2V0Q2VsbFZhbHVlKHNvcnRBc2NlbmRpbmcgPyBiIDogYSwgY29sdW1uSW5kZXgpO1xyXG4gIGlmICh2MSA9PT0gXCJcIiB8fCB2MiA9PT0gXCJcIiB8fCBpc05hTih2MSkgfHwgaXNOYU4odjIpKSB7XHJcbiAgICByZXR1cm4gdjEudG9TdHJpbmcoKS5sb2NhbGVDb21wYXJlKHYyKTtcclxuICB9XHJcbiAgcmV0dXJuIHYxIC0gdjI7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja1ZhbHVlID0gKHRleHQpID0+IChyb3dzKSA9PiB7XHJcbiAgcmV0dXJuIEFycmF5LmZyb20ocm93cy5jaGlsZHJlbikuc29tZSggKHJvdykgPT4ge1xyXG4gICAgY29uc3QgZmllbGRWYWx1ZSA9IHJvdy5pbm5lclRleHQudG9Mb3dlckNhc2UoKTtcclxuICAgIHJldHVybiAoZmllbGRWYWx1ZS5zdWJzdHJpbmcoMCwgdGV4dC5sZW5ndGgpID09PSB0ZXh0KTtcclxuICB9KTtcclxufTtcclxuICAgIFxyXG5jb25zdCBib2R5TWFuYWdlciA9IGZ1bmN0aW9uIGdldFJvd3MoKSB7XHJcbiAgbGV0IGNhbGxiYWNrcztcclxuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRhYmxlXCIpXHJcbiAgY29uc3QgcmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyaW5nVGFibGUoKSB7XHJcbiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XHJcbiAgICBjYWxsYmFja3MuZm9yRWFjaCh0ciA9PiB7XHJcbiAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcclxuICAgIH0pXHJcblxyXG4gICAgYm9keS5yZXBsYWNlQ2hpbGQodGJvZHksIGJvZHkucXVlcnlTZWxlY3RvcihcInRib2R5XCIpKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgY2FsbGJhY2tzID0gY2FsbGJhY2s7XHJcbiAgICByZW5kZXIoKVxyXG4gIH1cclxufVxyXG5cclxucmVuZGVyVGFibGUoKS50aGVuKCAoKSA9PiB7XHJcblxyXG4gIC8vU29ydGluZyB0YWJsZVxyXG5cclxuICBjb25zdCBoZWFkZXJzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhYmxlSGVhZGVyX19jZWxsXCIpKTtcclxuICBjb25zdCB3aG9sZVRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRhYmxlXCIpO1xyXG4gIGNvbnN0IHRhYmxlUm93cyA9IEFycmF5LmZyb20od2hvbGVUYWJsZS5xdWVyeVNlbGVjdG9yKFwidGJvZHlcIikucm93cyk7XHJcbiAgbGV0IGNoZWNrID0gZmFsc2U7XHJcbiAgbGV0IGFzY09yRHNjID0gZmFsc2U7XHJcbiAgbGV0IGNoZWNrU29ydGluZyA9IGZhbHNlO1xyXG4gIFxyXG4gIGhlYWRlcnMuZm9yRWFjaCh0aCA9PlxyXG4gICAgdGguYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICBjb25zdCB0YWJsZVJvd3MgPSBBcnJheS5mcm9tKHdob2xlVGFibGUucXVlcnlTZWxlY3RvcihcInRib2R5XCIpLnJvd3MpO1xyXG4gICAgICBhc2NPckRzYyA9ICFhc2NPckRzYztcclxuICAgICAgY29uc3QgaW5kZXhPZlRoID0gQXJyYXkuZnJvbSh0aC5wYXJlbnROb2RlLmNoaWxkcmVuKS5pbmRleE9mKHRoKTtcclxuICAgICAgY29uc3Qgc29ydCA9IGJvZHlNYW5hZ2VyKCk7XHJcbiAgICAgIHNvcnQodGFibGVSb3dzXHJcbiAgICAgICAgLnNvcnQoY29tcGFyZXIoaW5kZXhPZlRoLCBhc2NPckRzYykpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgIGlmICghY2hlY2tTb3J0aW5nKSB7XHJcbiAgICAgICAgdGguY2xhc3NMaXN0LnJlbW92ZShcImhlYWRlclNvcnREb3duXCIpO1xyXG4gICAgICAgIHRoLmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJTb3J0VXBcIik7XHJcbiAgICAgICAgY2hlY2tTb3J0aW5nID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aC5jbGFzc0xpc3QucmVtb3ZlKFwiaGVhZGVyU29ydFVwXCIpO1xyXG4gICAgICAgIHRoLmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJTb3J0RG93blwiKTtcclxuICAgICAgICBjaGVja1NvcnRpbmcgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBjb25zdCBidXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ1dHRvblwiKSk7XHJcbiAgXHJcbiAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBcclxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBjb25zdCB0YWJsZVJvd3MgPSBBcnJheS5mcm9tKHdob2xlVGFibGUucXVlcnlTZWxlY3RvcihcInRib2R5XCIpLnJvd3MpO1xyXG4gICAgICBhc2NPckRzYyA9ICFhc2NPckRzYztcclxuICAgICAgY29uc3QgaW5kZXhPZlRoID0gTnVtYmVyKGJ1dHRvbi52YWx1ZSk7XHJcbiAgICAgIGNvbnN0IHNvcnQgPSBib2R5TWFuYWdlcigpO1xyXG4gICAgICBzb3J0KHRhYmxlUm93c1xyXG4gICAgICAgIC5zb3J0KGNvbXBhcmVyKGluZGV4T2ZUaCwgYXNjT3JEc2MpKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIWNoZWNrU29ydGluZykge1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGVhZGVyU29ydERvd25cIik7XHJcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJTb3J0VXBcIik7XHJcbiAgICAgICAgY2hlY2tTb3J0aW5nID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImhlYWRlclNvcnRVcFwiKTtcclxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImhlYWRlclNvcnREb3duXCIpO1xyXG4gICAgICAgIGNoZWNrU29ydGluZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KSlcclxuXHJcblxyXG4gIC8vU2VhcmNoIGluIHRhYmxlXHJcbiAgXHJcbiAgY29uc3QgaW5wdXRRdWVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5wdXRfX2ZpZWxkLS1qc1wiKTtcclxuICBcclxuICBpbnB1dFF1ZXJ5LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBlID0+IHtcclxuICAgIGNvbnN0IHRleHQgPSBpbnB1dFF1ZXJ5LnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCBzZWFyY2ggPSBib2R5TWFuYWdlcigpO1xyXG5cclxuICAgIHNlYXJjaCh0YWJsZVJvd3MuZmlsdGVyKGNoZWNrVmFsdWUodGV4dCkpKTtcclxuICB9KTtcclxuICBcclxufSlcclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n')}]);