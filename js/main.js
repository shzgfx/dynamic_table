!function(c){var n={};function t(e){if(n[e])return n[e].exports;var l=n[e]={i:e,l:!1,exports:{}};return c[e].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=c,t.c=n,t.d=function(c,n,e){t.o(c,n)||Object.defineProperty(c,n,{enumerable:!0,get:e})},t.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},t.t=function(c,n){if(1&n&&(c=t(c)),8&n)return c;if(4&n&&"object"==typeof c&&c&&c.__esModule)return c;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:c}),2&n&&"string"!=typeof c)for(var l in c)t.d(e,l,function(n){return c[n]}.bind(null,l));return e},t.n=function(c){var n=c&&c.__esModule?function(){return c.default}:function(){return c};return t.d(n,"a",n),n},t.o=function(c,n){return Object.prototype.hasOwnProperty.call(c,n)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval('\r\n\r\n// service worker registration - remove if you\'re not going to use it\r\n\r\nif (\'serviceWorker\' in navigator) {\r\n  window.addEventListener(\'load\', function() {\r\n    navigator.serviceWorker.register(\'serviceworker.js\').then(function(registration) {\r\n      // Registration was successful\r\n      console.log(\'ServiceWorker registration successful with scope: \', registration.scope);\r\n    }, function(err) {\r\n      // registration failed :(\r\n      console.log(\'ServiceWorker registration failed: \', err);\r\n    });\r\n  });\r\n}\r\n\r\n// place your code below\r\nconst tableBody = document.querySelector(".table__body--js");\r\nlet todayDate = new Date();\r\nlet lastMonthDate = newDate(todayDate);\r\n\r\n\r\nconst totalIncome = (incomes) => incomes.reduce((acc,income) => acc + income);\r\n\r\n//this function return year-month date(getYearAndMonth)\r\nfunction newDate(todayDate) {\r\n  todayDate.setDate(1);\r\n  todayDate.setMonth(todayDate.getMonth() - 1);\r\n  return new Date(todayDate).toISOString().slice(0,7);\r\n}\r\n\r\nfunction lastMonthIncomeDate(incomes) {\r\n  let lastMonth = incomes.filter(income => {\r\n    const incomeDate = income.date.slice(0,7);\r\n    if (incomeDate === lastMonthDate) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  })\r\n  return lastMonth;\r\n};\r\n\r\nfunction lastMonthIncomes(incomes) {\r\n  let lastMonth = lastMonthIncomeDate(incomes);\r\n  lastMonth = lastMonth.map(el => el.value);\r\n  if (lastMonth.length > 0) {\r\n    lastMonth = lastMonth.reduce((a, b) => {\r\n      return parseFloat(a) + parseFloat(b)\r\n    })\r\n  } \r\n  else {\r\n    lastMonth = 0;\r\n  }\r\n  return lastMonth;\r\n}\r\n\r\n\r\nasync function companny (comp, companiesArray) {\r\n  let companyIncomes = await fetch(`https://recruitment.hal.skygate.io/incomes/${comp.id}`);\r\n  companyIncomes = await companyIncomes.json();\r\n  companyIncomes = companyIncomes.incomes;\r\n  const companyIncome = companyIncomes.map(comp => parseFloat(comp.value));\r\n\r\n  const total = Number(totalIncome(companyIncome)).toFixed(2);\r\n  const average = Number(total/(companyIncome.length + 1)).toFixed(2);\r\n  const monthIncome = Number(lastMonthIncomes(companyIncomes)).toFixed(2);\r\n\r\n  const companyObj = {\r\n    ...comp, \r\n    "totalIncome" : total, \r\n    "averageIncome" : average, \r\n    monthIncome\r\n  };\r\n\r\n  companiesArray.push(companyObj);\r\n}\r\n\r\nasync function getCompaniesList() {\r\n  let company = await fetch("https://recruitment.hal.skygate.io/companies");\r\n  company = await company.json();\r\n  const companiesArray = [];\r\n  \r\n  await Promise.all(company.map(comp => {\r\n    return companny(comp, companiesArray);\r\n  }));\r\n\r\n  \r\n  \r\n  return companiesArray;\r\n  \r\n  \r\n \r\n}\r\n\r\nasync function renderTable() {\r\n  const companiesList = await getCompaniesList();\r\n  let tableInnerHtml = "";\r\n\r\n  for (const company of companiesList) {\r\n    const {id, name, city, totalIncome, averageIncome, monthIncome} = company;\r\n    tableInnerHtml += `\r\n       <tr class="tableRow">\r\n          <td class="tableRow__cell">${id}</td>\r\n          <td class="tableRow__cell">${name}</td>\r\n          <td class="tableRow__cell">${city}</td>\r\n          <td class="tableRow__cell">${totalIncome}</td>\r\n          <td class="tableRow__cell">${averageIncome}</td>\r\n          <td class="tableRow__cell">${monthIncome}</td>\r\n        </tr>\r\n      `;\r\n  }\r\n\r\n  tableBody.innerHTML = tableInnerHtml;\r\n\r\n}\r\n\r\n\r\n\r\n\r\n//TESTING FEW SOLUTION OF PAGINATION\r\n//getCellValue compare innerText and textContent if the table row is empty then it\'s pull data form textContent\r\nconst getCellValue = (tableRow, columnIndex) => (tableRow.children[columnIndex].innerText || tableRow.children[columnIndex].textContent);\r\n\r\nconst comparer = (columnIndex, sortAscending) => (a, b) => {\r\n  const v1 = getCellValue(sortAscending ? a : b, columnIndex);\r\n  const v2 = getCellValue(sortAscending ? b : a, columnIndex);\r\n  if (v1 === "" || v2 === "" || isNaN(v1) || isNaN(v2)) {\r\n    return v1.toString().localeCompare(v2);\r\n  }\r\n  return v1 - v2;\r\n};\r\n\r\nconst checkValue = (text) => (rows) => {\r\n  return Array.from(rows.children).some( (row) => {\r\n    const fieldValue = row.innerText.toLowerCase();\r\n    return (fieldValue.substring(0, text.length) === text);\r\n  });\r\n};\r\n    \r\nconst bodyManager = function getRows() {\r\n  let callbacks;\r\n  const body = document.querySelector("table")\r\n  const render = function renderingTable() {\r\n    const tbody = document.createElement(\'tbody\');\r\n    callbacks.forEach(tr => {\r\n      tbody.appendChild(tr);\r\n    })\r\n\r\n    body.replaceChild(tbody, body.querySelector("tbody"));\r\n  }\r\n\r\n  return function(callback) {\r\n    callbacks = callback;\r\n    render()\r\n  }\r\n}\r\n\r\nfunction classRemove(arr, indexOfTh) {\r\n  arr.splice(indexOfTh, 1)\r\n      \r\n  arr.forEach( th => {\r\n    th.classList.remove("headerSortDown")\r\n    th.classList.remove("headerSortUp");\r\n  })\r\n}\r\n\r\nrenderTable().then( () => {\r\n\r\n  //Sorting table\r\n\r\n  const headers = Array.from(document.querySelectorAll(".tableHeader__cell"));\r\n  const wholeTable = document.querySelector("table");\r\n  const tableRows = Array.from(wholeTable.querySelector("tbody").rows);\r\n  let check = false;\r\n  let ascOrDsc = false;\r\n  let checkSorting = false;\r\n  \r\n  headers.forEach(th =>\r\n    th.addEventListener("click", e => {\r\n      const tableRows = Array.from(wholeTable.querySelector("tbody").rows);\r\n      ascOrDsc = !ascOrDsc;\r\n      const indexOfTh = Array.from(th.parentNode.children).indexOf(th);\r\n      const sort = bodyManager();\r\n      sort(tableRows\r\n        .sort(comparer(indexOfTh, ascOrDsc))\r\n        );\r\n      \r\n      const tableHead = [...headers]; \r\n      \r\n      classRemove(tableHead, indexOfTh);\r\n      \r\n      if (!checkSorting) {\r\n        th.classList.remove("headerSortDown");\r\n        th.classList.add("headerSortUp");\r\n        checkSorting = true;\r\n      }\r\n      else {\r\n        th.classList.remove("headerSortUp");\r\n        th.classList.add("headerSortDown");\r\n        checkSorting = false;\r\n      }\r\n    \r\n    })\r\n  );\r\n\r\n  const buttons = Array.from(document.querySelectorAll(".button"));\r\n  \r\n  buttons.forEach(button => \r\n    button.addEventListener(\'click\', e => {\r\n      const tableRows = Array.from(wholeTable.querySelector("tbody").rows);\r\n      ascOrDsc = !ascOrDsc;\r\n      const indexOfTh = Number(button.value);\r\n      const sort = bodyManager();\r\n      sort(tableRows\r\n        .sort(comparer(indexOfTh, ascOrDsc))\r\n        );\r\n\r\n      const tableHead = [...buttons]; \r\n      \r\n      classRemove(tableHead, indexOfTh);\r\n\r\n      if (!checkSorting) {\r\n        button.classList.remove("headerSortDown");\r\n        button.classList.add("headerSortUp");\r\n        checkSorting = true;\r\n      }\r\n      else {\r\n        button.classList.remove("headerSortUp");\r\n        button.classList.add("headerSortDown");\r\n        checkSorting = false;\r\n      }\r\n    }))\r\n\r\n\r\n  //Search in table\r\n  \r\n  const inputQuery = document.querySelector(".input__field--js");\r\n  \r\n  inputQuery.addEventListener("keyup", e => {\r\n    const text = inputQuery.value.toLowerCase();\r\n    const search = bodyManager();\r\n\r\n    search(tableRows.filter(checkValue(text)));\r\n  });\r\n  \r\n})\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsaUZBQWlGLFFBQVE7QUFDekY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7OztBQUlIOzs7O0FBSUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyx3REFBd0Q7QUFDbkU7QUFDQTtBQUNBLHVDQUF1QyxHQUFHO0FBQzFDLHVDQUF1QyxLQUFLO0FBQzVDLHVDQUF1QyxLQUFLO0FBQzVDLHVDQUF1QyxZQUFZO0FBQ25ELHVDQUF1QyxjQUFjO0FBQ3JELHVDQUF1QyxZQUFZO0FBQ25EO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7OztBQUdMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUgsQ0FBQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vLyBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gLSByZW1vdmUgaWYgeW91J3JlIG5vdCBnb2luZyB0byB1c2UgaXRcclxuXHJcbmlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdzZXJ2aWNld29ya2VyLmpzJykudGhlbihmdW5jdGlvbihyZWdpc3RyYXRpb24pIHtcclxuICAgICAgLy8gUmVnaXN0cmF0aW9uIHdhcyBzdWNjZXNzZnVsXHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsIHdpdGggc2NvcGU6ICcsIHJlZ2lzdHJhdGlvbi5zY29wZSk7XHJcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgLy8gcmVnaXN0cmF0aW9uIGZhaWxlZCA6KFxyXG4gICAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiAnLCBlcnIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vIHBsYWNlIHlvdXIgY29kZSBiZWxvd1xyXG5jb25zdCB0YWJsZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlX19ib2R5LS1qc1wiKTtcclxubGV0IHRvZGF5RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbmxldCBsYXN0TW9udGhEYXRlID0gbmV3RGF0ZSh0b2RheURhdGUpO1xyXG5cclxuXHJcbmNvbnN0IHRvdGFsSW5jb21lID0gKGluY29tZXMpID0+IGluY29tZXMucmVkdWNlKChhY2MsaW5jb21lKSA9PiBhY2MgKyBpbmNvbWUpO1xyXG5cclxuLy90aGlzIGZ1bmN0aW9uIHJldHVybiB5ZWFyLW1vbnRoIGRhdGUoZ2V0WWVhckFuZE1vbnRoKVxyXG5mdW5jdGlvbiBuZXdEYXRlKHRvZGF5RGF0ZSkge1xyXG4gIHRvZGF5RGF0ZS5zZXREYXRlKDEpO1xyXG4gIHRvZGF5RGF0ZS5zZXRNb250aCh0b2RheURhdGUuZ2V0TW9udGgoKSAtIDEpO1xyXG4gIHJldHVybiBuZXcgRGF0ZSh0b2RheURhdGUpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCw3KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbGFzdE1vbnRoSW5jb21lRGF0ZShpbmNvbWVzKSB7XHJcbiAgbGV0IGxhc3RNb250aCA9IGluY29tZXMuZmlsdGVyKGluY29tZSA9PiB7XHJcbiAgICBjb25zdCBpbmNvbWVEYXRlID0gaW5jb21lLmRhdGUuc2xpY2UoMCw3KTtcclxuICAgIGlmIChpbmNvbWVEYXRlID09PSBsYXN0TW9udGhEYXRlKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9KVxyXG4gIHJldHVybiBsYXN0TW9udGg7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBsYXN0TW9udGhJbmNvbWVzKGluY29tZXMpIHtcclxuICBsZXQgbGFzdE1vbnRoID0gbGFzdE1vbnRoSW5jb21lRGF0ZShpbmNvbWVzKTtcclxuICBsYXN0TW9udGggPSBsYXN0TW9udGgubWFwKGVsID0+IGVsLnZhbHVlKTtcclxuICBpZiAobGFzdE1vbnRoLmxlbmd0aCA+IDApIHtcclxuICAgIGxhc3RNb250aCA9IGxhc3RNb250aC5yZWR1Y2UoKGEsIGIpID0+IHtcclxuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoYSkgKyBwYXJzZUZsb2F0KGIpXHJcbiAgICB9KVxyXG4gIH0gXHJcbiAgZWxzZSB7XHJcbiAgICBsYXN0TW9udGggPSAwO1xyXG4gIH1cclxuICByZXR1cm4gbGFzdE1vbnRoO1xyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY29tcGFubnkgKGNvbXAsIGNvbXBhbmllc0FycmF5KSB7XHJcbiAgbGV0IGNvbXBhbnlJbmNvbWVzID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vcmVjcnVpdG1lbnQuaGFsLnNreWdhdGUuaW8vaW5jb21lcy8ke2NvbXAuaWR9YCk7XHJcbiAgY29tcGFueUluY29tZXMgPSBhd2FpdCBjb21wYW55SW5jb21lcy5qc29uKCk7XHJcbiAgY29tcGFueUluY29tZXMgPSBjb21wYW55SW5jb21lcy5pbmNvbWVzO1xyXG4gIGNvbnN0IGNvbXBhbnlJbmNvbWUgPSBjb21wYW55SW5jb21lcy5tYXAoY29tcCA9PiBwYXJzZUZsb2F0KGNvbXAudmFsdWUpKTtcclxuXHJcbiAgY29uc3QgdG90YWwgPSBOdW1iZXIodG90YWxJbmNvbWUoY29tcGFueUluY29tZSkpLnRvRml4ZWQoMik7XHJcbiAgY29uc3QgYXZlcmFnZSA9IE51bWJlcih0b3RhbC8oY29tcGFueUluY29tZS5sZW5ndGggKyAxKSkudG9GaXhlZCgyKTtcclxuICBjb25zdCBtb250aEluY29tZSA9IE51bWJlcihsYXN0TW9udGhJbmNvbWVzKGNvbXBhbnlJbmNvbWVzKSkudG9GaXhlZCgyKTtcclxuXHJcbiAgY29uc3QgY29tcGFueU9iaiA9IHtcclxuICAgIC4uLmNvbXAsIFxyXG4gICAgXCJ0b3RhbEluY29tZVwiIDogdG90YWwsIFxyXG4gICAgXCJhdmVyYWdlSW5jb21lXCIgOiBhdmVyYWdlLCBcclxuICAgIG1vbnRoSW5jb21lXHJcbiAgfTtcclxuXHJcbiAgY29tcGFuaWVzQXJyYXkucHVzaChjb21wYW55T2JqKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0Q29tcGFuaWVzTGlzdCgpIHtcclxuICBsZXQgY29tcGFueSA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9yZWNydWl0bWVudC5oYWwuc2t5Z2F0ZS5pby9jb21wYW5pZXNcIik7XHJcbiAgY29tcGFueSA9IGF3YWl0IGNvbXBhbnkuanNvbigpO1xyXG4gIGNvbnN0IGNvbXBhbmllc0FycmF5ID0gW107XHJcbiAgXHJcbiAgYXdhaXQgUHJvbWlzZS5hbGwoY29tcGFueS5tYXAoY29tcCA9PiB7XHJcbiAgICByZXR1cm4gY29tcGFubnkoY29tcCwgY29tcGFuaWVzQXJyYXkpO1xyXG4gIH0pKTtcclxuXHJcbiAgXHJcbiAgXHJcbiAgcmV0dXJuIGNvbXBhbmllc0FycmF5O1xyXG4gIFxyXG4gIFxyXG4gXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbmRlclRhYmxlKCkge1xyXG4gIGNvbnN0IGNvbXBhbmllc0xpc3QgPSBhd2FpdCBnZXRDb21wYW5pZXNMaXN0KCk7XHJcbiAgbGV0IHRhYmxlSW5uZXJIdG1sID0gXCJcIjtcclxuXHJcbiAgZm9yIChjb25zdCBjb21wYW55IG9mIGNvbXBhbmllc0xpc3QpIHtcclxuICAgIGNvbnN0IHtpZCwgbmFtZSwgY2l0eSwgdG90YWxJbmNvbWUsIGF2ZXJhZ2VJbmNvbWUsIG1vbnRoSW5jb21lfSA9IGNvbXBhbnk7XHJcbiAgICB0YWJsZUlubmVySHRtbCArPSBgXHJcbiAgICAgICA8dHIgY2xhc3M9XCJ0YWJsZVJvd1wiPlxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwidGFibGVSb3dfX2NlbGxcIj4ke2lkfTwvdGQ+XHJcbiAgICAgICAgICA8dGQgY2xhc3M9XCJ0YWJsZVJvd19fY2VsbFwiPiR7bmFtZX08L3RkPlxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwidGFibGVSb3dfX2NlbGxcIj4ke2NpdHl9PC90ZD5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cInRhYmxlUm93X19jZWxsXCI+JHt0b3RhbEluY29tZX08L3RkPlxyXG4gICAgICAgICAgPHRkIGNsYXNzPVwidGFibGVSb3dfX2NlbGxcIj4ke2F2ZXJhZ2VJbmNvbWV9PC90ZD5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cInRhYmxlUm93X19jZWxsXCI+JHttb250aEluY29tZX08L3RkPlxyXG4gICAgICAgIDwvdHI+XHJcbiAgICAgIGA7XHJcbiAgfVxyXG5cclxuICB0YWJsZUJvZHkuaW5uZXJIVE1MID0gdGFibGVJbm5lckh0bWw7XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4vL1RFU1RJTkcgRkVXIFNPTFVUSU9OIE9GIFBBR0lOQVRJT05cclxuLy9nZXRDZWxsVmFsdWUgY29tcGFyZSBpbm5lclRleHQgYW5kIHRleHRDb250ZW50IGlmIHRoZSB0YWJsZSByb3cgaXMgZW1wdHkgdGhlbiBpdCdzIHB1bGwgZGF0YSBmb3JtIHRleHRDb250ZW50XHJcbmNvbnN0IGdldENlbGxWYWx1ZSA9ICh0YWJsZVJvdywgY29sdW1uSW5kZXgpID0+ICh0YWJsZVJvdy5jaGlsZHJlbltjb2x1bW5JbmRleF0uaW5uZXJUZXh0IHx8IHRhYmxlUm93LmNoaWxkcmVuW2NvbHVtbkluZGV4XS50ZXh0Q29udGVudCk7XHJcblxyXG5jb25zdCBjb21wYXJlciA9IChjb2x1bW5JbmRleCwgc29ydEFzY2VuZGluZykgPT4gKGEsIGIpID0+IHtcclxuICBjb25zdCB2MSA9IGdldENlbGxWYWx1ZShzb3J0QXNjZW5kaW5nID8gYSA6IGIsIGNvbHVtbkluZGV4KTtcclxuICBjb25zdCB2MiA9IGdldENlbGxWYWx1ZShzb3J0QXNjZW5kaW5nID8gYiA6IGEsIGNvbHVtbkluZGV4KTtcclxuICBpZiAodjEgPT09IFwiXCIgfHwgdjIgPT09IFwiXCIgfHwgaXNOYU4odjEpIHx8IGlzTmFOKHYyKSkge1xyXG4gICAgcmV0dXJuIHYxLnRvU3RyaW5nKCkubG9jYWxlQ29tcGFyZSh2Mik7XHJcbiAgfVxyXG4gIHJldHVybiB2MSAtIHYyO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tWYWx1ZSA9ICh0ZXh0KSA9PiAocm93cykgPT4ge1xyXG4gIHJldHVybiBBcnJheS5mcm9tKHJvd3MuY2hpbGRyZW4pLnNvbWUoIChyb3cpID0+IHtcclxuICAgIGNvbnN0IGZpZWxkVmFsdWUgPSByb3cuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCk7XHJcbiAgICByZXR1cm4gKGZpZWxkVmFsdWUuc3Vic3RyaW5nKDAsIHRleHQubGVuZ3RoKSA9PT0gdGV4dCk7XHJcbiAgfSk7XHJcbn07XHJcbiAgICBcclxuY29uc3QgYm9keU1hbmFnZXIgPSBmdW5jdGlvbiBnZXRSb3dzKCkge1xyXG4gIGxldCBjYWxsYmFja3M7XHJcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ0YWJsZVwiKVxyXG4gIGNvbnN0IHJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcmluZ1RhYmxlKCkge1xyXG4gICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xyXG4gICAgY2FsbGJhY2tzLmZvckVhY2godHIgPT4ge1xyXG4gICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XHJcbiAgICB9KVxyXG5cclxuICAgIGJvZHkucmVwbGFjZUNoaWxkKHRib2R5LCBib2R5LnF1ZXJ5U2VsZWN0b3IoXCJ0Ym9keVwiKSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrO1xyXG4gICAgcmVuZGVyKClcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsYXNzUmVtb3ZlKGFyciwgaW5kZXhPZlRoKSB7XHJcbiAgYXJyLnNwbGljZShpbmRleE9mVGgsIDEpXHJcbiAgICAgIFxyXG4gIGFyci5mb3JFYWNoKCB0aCA9PiB7XHJcbiAgICB0aC5jbGFzc0xpc3QucmVtb3ZlKFwiaGVhZGVyU29ydERvd25cIilcclxuICAgIHRoLmNsYXNzTGlzdC5yZW1vdmUoXCJoZWFkZXJTb3J0VXBcIik7XHJcbiAgfSlcclxufVxyXG5cclxucmVuZGVyVGFibGUoKS50aGVuKCAoKSA9PiB7XHJcblxyXG4gIC8vU29ydGluZyB0YWJsZVxyXG5cclxuICBjb25zdCBoZWFkZXJzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhYmxlSGVhZGVyX19jZWxsXCIpKTtcclxuICBjb25zdCB3aG9sZVRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRhYmxlXCIpO1xyXG4gIGNvbnN0IHRhYmxlUm93cyA9IEFycmF5LmZyb20od2hvbGVUYWJsZS5xdWVyeVNlbGVjdG9yKFwidGJvZHlcIikucm93cyk7XHJcbiAgbGV0IGNoZWNrID0gZmFsc2U7XHJcbiAgbGV0IGFzY09yRHNjID0gZmFsc2U7XHJcbiAgbGV0IGNoZWNrU29ydGluZyA9IGZhbHNlO1xyXG4gIFxyXG4gIGhlYWRlcnMuZm9yRWFjaCh0aCA9PlxyXG4gICAgdGguYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xyXG4gICAgICBjb25zdCB0YWJsZVJvd3MgPSBBcnJheS5mcm9tKHdob2xlVGFibGUucXVlcnlTZWxlY3RvcihcInRib2R5XCIpLnJvd3MpO1xyXG4gICAgICBhc2NPckRzYyA9ICFhc2NPckRzYztcclxuICAgICAgY29uc3QgaW5kZXhPZlRoID0gQXJyYXkuZnJvbSh0aC5wYXJlbnROb2RlLmNoaWxkcmVuKS5pbmRleE9mKHRoKTtcclxuICAgICAgY29uc3Qgc29ydCA9IGJvZHlNYW5hZ2VyKCk7XHJcbiAgICAgIHNvcnQodGFibGVSb3dzXHJcbiAgICAgICAgLnNvcnQoY29tcGFyZXIoaW5kZXhPZlRoLCBhc2NPckRzYykpXHJcbiAgICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRhYmxlSGVhZCA9IFsuLi5oZWFkZXJzXTsgXHJcbiAgICAgIFxyXG4gICAgICBjbGFzc1JlbW92ZSh0YWJsZUhlYWQsIGluZGV4T2ZUaCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWNoZWNrU29ydGluZykge1xyXG4gICAgICAgIHRoLmNsYXNzTGlzdC5yZW1vdmUoXCJoZWFkZXJTb3J0RG93blwiKTtcclxuICAgICAgICB0aC5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyU29ydFVwXCIpO1xyXG4gICAgICAgIGNoZWNrU29ydGluZyA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGguY2xhc3NMaXN0LnJlbW92ZShcImhlYWRlclNvcnRVcFwiKTtcclxuICAgICAgICB0aC5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyU29ydERvd25cIik7XHJcbiAgICAgICAgY2hlY2tTb3J0aW5nID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgfSlcclxuICApO1xyXG5cclxuICBjb25zdCBidXR0b25zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ1dHRvblwiKSk7XHJcbiAgXHJcbiAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBcclxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBjb25zdCB0YWJsZVJvd3MgPSBBcnJheS5mcm9tKHdob2xlVGFibGUucXVlcnlTZWxlY3RvcihcInRib2R5XCIpLnJvd3MpO1xyXG4gICAgICBhc2NPckRzYyA9ICFhc2NPckRzYztcclxuICAgICAgY29uc3QgaW5kZXhPZlRoID0gTnVtYmVyKGJ1dHRvbi52YWx1ZSk7XHJcbiAgICAgIGNvbnN0IHNvcnQgPSBib2R5TWFuYWdlcigpO1xyXG4gICAgICBzb3J0KHRhYmxlUm93c1xyXG4gICAgICAgIC5zb3J0KGNvbXBhcmVyKGluZGV4T2ZUaCwgYXNjT3JEc2MpKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCB0YWJsZUhlYWQgPSBbLi4uYnV0dG9uc107IFxyXG4gICAgICBcclxuICAgICAgY2xhc3NSZW1vdmUodGFibGVIZWFkLCBpbmRleE9mVGgpO1xyXG5cclxuICAgICAgaWYgKCFjaGVja1NvcnRpbmcpIHtcclxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImhlYWRlclNvcnREb3duXCIpO1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaGVhZGVyU29ydFVwXCIpO1xyXG4gICAgICAgIGNoZWNrU29ydGluZyA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJoZWFkZXJTb3J0VXBcIik7XHJcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJoZWFkZXJTb3J0RG93blwiKTtcclxuICAgICAgICBjaGVja1NvcnRpbmcgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSkpXHJcblxyXG5cclxuICAvL1NlYXJjaCBpbiB0YWJsZVxyXG4gIFxyXG4gIGNvbnN0IGlucHV0UXVlcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmlucHV0X19maWVsZC0tanNcIik7XHJcbiAgXHJcbiAgaW5wdXRRdWVyeS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZSA9PiB7XHJcbiAgICBjb25zdCB0ZXh0ID0gaW5wdXRRdWVyeS52YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3Qgc2VhcmNoID0gYm9keU1hbmFnZXIoKTtcclxuXHJcbiAgICBzZWFyY2godGFibGVSb3dzLmZpbHRlcihjaGVja1ZhbHVlKHRleHQpKSk7XHJcbiAgfSk7XHJcbiAgXHJcbn0pXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')}]);